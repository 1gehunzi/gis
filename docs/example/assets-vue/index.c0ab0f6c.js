import{L as e}from"./location-to.af6c658c.js";import{h as a,L as t}from"./style.1b4b1182.js";import{_ as o,m as r,u as l,aI as n,n as s,r as i,o as c,c as u,f,z as m,i as d,F as b,p as g,l as p,a as v}from"./common.dccae925.js";const h=(e=>(g("data-v-82cfe56a"),e=e(),p(),e))((()=>v("div",{class:"echatsView"},[v("div",{id:"echartsView1",style:{width:"100%",height:"100%"}})],-1)));var y=o(r({__name:"index",setup(o){const r=window.mapWork,g=l(!1);let p;window.onresize=function(){p.resize()},n((()=>{p=a(document.getElementById("echartsView1"))})),r.eventTarget.on("measureEnd",(function(e){g.value=!0,s((()=>{w(e)}))})),r.eventTarget.on("measureClick",(function(e){e.value&&s((()=>{w(e.value)}))}));const v=()=>{r.measureSection()},y=()=>{r.removeAll(),g.value=!1,p.clear()};function w(e){if(null==e||null==e.arrPoint)return;const a=e.arrPoint;let o="";const l={grid:{left:10,right:40,bottom:10,top:40,containLabel:!0},dataZoom:[{type:"inside",throttle:50}],tooltip:{trigger:"axis",formatter:e=>{if(0===e.length)return r.hideTipMarker(),o;const t=e[0].value,l=a[e[0].dataIndex],n=r.calculation(e[0]);return o=`当前位置<br />\n                      距起点：${n.len}<br />\n                      海拔：<span style='color:${e[0].color};'>${n.hbgdStr}</span><br />\n                      经度：${l.lng}<br />\n                      纬度：${l.lat}`,r.showTipMarker(l,t,o),o}},xAxis:[{name:"行程",type:"category",nameTextStyle:{color:"rgb(255, 70, 131)"},boundaryGap:!1,axisLine:{show:!0},axisLabel:{show:!0,formatter:"{value} 米",color:"#fff"},data:e.arrLen}],yAxis:[{name:"高程",nameTextStyle:{color:"rgb(255, 70, 131)"},type:"value",min:x(a),axisLabel:{formatter:"{value} 米",color:"#fff"}}],series:[{name:"高程值",type:"line",smooth:!0,symbol:"none",sampling:"average",itemStyle:{normal:{color:"rgb(255, 70, 131)"}},areaStyle:{normal:{color:new t(0,0,0,1,[{offset:0,color:"rgb(255, 158, 68)"},{offset:1,color:"rgb(255, 70, 131)"}])}},data:e.arrHB}]};p.setOption(l),p.resize()}function x(e){let a="dataMin";if(null==e||0===e.length)return a;a=e[0].alt;for(let t=0;t<e.length;t++)e[t].alt<a&&(a=e[t].alt);return a}return(a,t)=>{const o=i("mars-button"),r=i("a-space"),l=i("mars-dialog");return c(),u(b,null,[f(l,{visible:!0,right:"10",top:"10"},{default:m((()=>[f(r,null,{default:m((()=>[f(o,{onClick:v},{default:m((()=>[d("绘制线")])),_:1}),f(o,{onClick:y},{default:m((()=>[d("清除")])),_:1})])),_:1})])),_:1}),f(l,{visible:g.value,"onUpdate:visible":t[0]||(t[0]=e=>g.value=e),left:70,right:70,bottom:40},{default:m((()=>[h])),_:1},8,["visible"]),f(e)],64)}}}),[["__scopeId","data-v-82cfe56a"]]);export{y as default};
