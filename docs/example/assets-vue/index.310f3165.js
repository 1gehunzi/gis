import{w as e}from"./style.4dfcf88f.js";import{L as a}from"./location-to.03cac166.js";import{_ as t,m as o,u as l,aI as n,O as i,r as s,o as c,c as d,f as r,z as u,a as p,i as v,F as f,b as m,p as h,l as g}from"./common.d35d5a69.js";const y={class:"f-mb infoView-content"},k=(e=>(h("data-v-7aa98128"),e=e(),g(),e))((()=>p("span",null,"模型列表： ",-1))),w={title:"打开GeoJSON文件"},b={title:"保存GeoJSON"},_={title:"删除"},T={class:"f-mb f-tac"},C={class:"f-mb"},S={class:"gltfImg"},E=["src","onClick"];var j=t(o({__name:"index",setup(t){const o=window.mapWork,h=l(!1),g=()=>{o.chkTestTerrain(h.value)},j=l(!1),L=()=>{o.onlyPickModelPosition(j.value)};let O;const I=l([]),J=l("车辆"),U=l([]);o.eventTarget.on("loadModelList",(function(e){O=e.data,Object.keys(O).forEach((e=>{I.value.push({value:e,lable:e})})),x()}));const x=()=>{U.value=O[J.value];for(let e=0;e<U.value.length;e++){const a=U.value[e];a.image=o.changeItemImage(a),a.style.url=o.changeItemUrl(a),U.value[e]=a}},G=e=>{const a=e.file,t=a.name;"json"!==(null==t?void 0:t.substring(t.lastIndexOf(".")+1,t.length).toLowerCase())&&alert("文件类型不合法,请选择json格式标注文件！"),o.openGeoJSON(a)},N=()=>{o.saveGeoJSON()},{activate:M,disable:P,isActivate:W,updateWidget:A}=e.exports.useWidget();n((()=>{const e=window.mapWork.mars3d;o.graphicLayer.on(e.EventType.drawCreated,(function(e){z(e)})),o.graphicLayer.on([e.EventType.editStart,e.EventType.editMovePoint,e.EventType.editStyle,e.EventType.editRemovePoint],(function(e){z(e)})),o.graphicLayer.on([e.EventType.editStop,e.EventType.removeGraphic],(function(e){setTimeout((()=>{o.graphicLayer.isEditing||P("graphic-editor")}),100)}))}));const z=e=>{const a=e.graphic;a._conventStyleJson||(a.options.style=a.toJSON().style,a._conventStyleJson=!0),W("graphic-editor")?A("graphic-editor",{data:{graphic:i(a)}}):M({name:"graphic-editor",data:{graphic:i(a)}})},D=()=>{o.deleteAll()};return(e,t)=>{const l=s("mars-icon"),n=s("a-upload"),i=s("a-space"),O=s("a-checkbox"),M=s("mars-select"),P=s("mars-dialog");return c(),d(f,null,[r(P,{visible:!0,right:"10",top:"10",bottom:"110",width:"270"},{default:u((()=>[p("div",y,[r(i,null,{default:u((()=>[k,r(n,{multiple:!1,name:"file",accept:"json,geojson",showUploadList:!1,onChange:G,beforeUpload:()=>!1},{default:u((()=>[p("i",w,[r(l,{icon:"folder-upload",width:"19"})])])),_:1},8,["beforeUpload"]),p("i",b,[r(l,{icon:"disk",width:"17",color:"#f2f2f2",onClick:N})]),p("i",_,[r(l,{icon:"delete",width:"17",color:"#f2f2f2",onClick:D})])])),_:1})]),p("div",T,[r(O,{onChange:g,checked:h.value,"onUpdate:checked":t[0]||(t[0]=e=>h.value=e),title:"深度检测"},{default:u((()=>[v("深度检测")])),_:1},8,["checked"]),r(O,{onChange:L,checked:j.value,"onUpdate:checked":t[1]||(t[1]=e=>j.value=e)},{default:u((()=>[v("仅在Tiles上拾取")])),_:1},8,["checked"])]),p("div",C,[r(M,{ref:"select",value:J.value,"onUpdate:value":t[2]||(t[2]=e=>J.value=e),style:{width:"93%","margin-left":"5px"},options:I.value,onChange:x,class:"mars-select_bottom"},null,8,["value","options"]),p("div",S,[p("ul",null,[(c(!0),d(f,null,m(U.value,(e=>(c(),d("li",{key:e.name},[p("img",{src:e.image,alt:"",onClick:a=>{return t=e.style,void o.startDrawModel(t);var t}},null,8,E)])))),128))])])])])),_:1}),r(a)],64)}}}),[["__scopeId","data-v-7aa98128"]]);export{j as default};
