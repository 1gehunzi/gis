import{_ as e,m as a,u as t,x as l,aI as o,r,o as f,q as n,z as d,f as s,i as u,w as i,j as c,A as p,p as m,l as y,a as b}from"./common.d35d5a69.js";import{h as v,j as h}from"./style.4dfcf88f.js";const g=e=>(m("data-v-2903631e"),e=e(),y(),e),x=g((()=>b("div",{id:"pieChart",class:"chart"},null,-1))),_=g((()=>b("div",{id:"histogram",class:"chart"},null,-1)));var k=e(a({__name:"index",setup(e){const a=window.mapWork,m=t(""),y=t("1"),b=l((()=>g.value.length>0)),g=t([]);a.eventTarget.on("tableData",(function(e){const a=[],t=[],l=[],o=[];e.list.forEach(((e,r)=>{l.push(e.type),o.push(e.area),a.push({name:e.type,value:e.area}),t.push({key:r,index:r+1,type:e.type,num:e.count,area:e.area})})),g.value=t;const r=document.getElementById("pieChart"),f=v(r),n={title:{text:"饼状图",left:"center",textStyle:{color:"#ffffff"}},tooltip:{trigger:"item",confine:!0,formatter:"{a} <br/>{b} : {c} 亩</br>占比 : {d}%",backgroundColor:"rgba(63, 72, 84, 0.7)",textStyle:{color:"#ffffff"}},series:[{name:"用地面积",type:"pie",radius:"50%",data:a,textStyle:{color:"#ffffff"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};f.setOption(n);const d=document.getElementById("histogram"),s=v(d),u={tooltip:{trigger:"item",confine:!0,backgroundColor:"rgba(63, 72, 84, 0.7)",formatter:"{b}: {c} 亩",textStyle:{color:"#ffffff"}},title:{text:"柱状图",left:"center",textStyle:{color:"#ffffff"}},grid:{left:"3%",right:"15%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01],show:!1},yAxis:{type:"category",data:l,axisLabel:{textStyle:{color:" #ffffff"}}},series:[{type:"bar",data:o,itemStyle:{normal:{label:{show:!0,position:"right",textStyle:{color:"#ffffff"}}}}}]};s.setOption(u)}));const k=t([{title:"序号",dataIndex:"index",width:45,key:"index"},{title:"类别",dataIndex:"type",key:"type"},{title:"数量",dataIndex:"num",width:60,key:"num"},{title:"面积(亩)",dataIndex:"area",width:80,key:"area"}]),w=()=>{a.drawRectangle()},S=()=>{a.drawCircle()},C=()=>{a.drawPolygon()},I=()=>{g.value=[],a.queryData(m.value)},j=()=>{g.value=[],a.clearAll()},A=t(0);return o((()=>{h((e=>{A.value=e}),400)})),(e,a)=>{const t=r("mars-input"),l=r("a-form-item"),o=r("mars-button"),v=r("a-space"),h=r("mars-table"),B=r("a-tab-pane"),R=r("a-tabs"),E=r("a-form"),K=r("mars-dialog");return f(),n(K,{visible:!0,right:"10",top:"10",width:"350"},{default:d((()=>[s(E,null,{default:d((()=>[s(l,{label:"名称"},{default:d((()=>[s(t,{class:"inputServe",value:m.value,"onUpdate:value":a[0]||(a[0]=e=>m.value=e),placeholder:"请输入查询关键字"},null,8,["value"])])),_:1}),s(l,{label:"范围"},{default:d((()=>[s(v,null,{default:d((()=>[s(o,{onClick:w},{default:d((()=>[u("框选范围")])),_:1}),s(o,{onClick:S},{default:d((()=>[u("圆形范围")])),_:1}),s(o,{onClick:C},{default:d((()=>[u("多边形范围")])),_:1})])),_:1})])),_:1}),s(l,{label:"操作"},{default:d((()=>[s(v,null,{default:d((()=>[s(o,{onClick:I},{default:d((()=>[u("查询")])),_:1}),s(o,{onClick:j},{default:d((()=>[u("清除")])),_:1})])),_:1})])),_:1}),i(s(l,null,{default:d((()=>[s(R,{activeKey:y.value,"onUpdate:activeKey":a[1]||(a[1]=e=>y.value=e),centered:!0,tabBarGutter:55},{default:d((()=>[s(B,{key:"1",tab:"表格","force-render":"",forceRender:!0},{default:d((()=>[s(l,null,{default:d((()=>[s(h,{pagination:!1,dataSource:g.value,columns:k.value,scroll:{y:A.value},size:"small",bordered:""},null,8,["dataSource","columns","scroll"])])),_:1})])),_:1}),s(B,{key:"2",tab:"饼状图",forceRender:!0},{default:d((()=>[x])),_:1}),s(B,{key:"3",tab:"柱状图",forceRender:!0},{default:d((()=>[_])),_:1})])),_:1},8,["activeKey"])])),_:1},512),[[c,p(b)]])])),_:1})])),_:1})}}}),[["__scopeId","data-v-2903631e"]]);export{k as default};
